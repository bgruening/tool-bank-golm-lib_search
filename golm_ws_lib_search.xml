<tool id="golm_ws_lib_search" name="Golm Metabolome Database search spectrum" version="2016-xx-xx">
  <description>
       : GC-MS Mass Spectral Database.
  </description>
  <command interpreter="perl">
  
    golm_ws_lib_search.pl
   
    	-inputSpectra="${input_type.masses}"
    	-ri="${input_type.ri}"
		-riWindow="${input_type.riWindow}"
    	-mzRes="${input_type.mzResolution}"
    	-maxHits="${input_type.maxHits}"
    	-maxIons="${input_type.maxIons}"
		-JaccardDistanceThreshold="${input_type.JaccardDistance}" -s12GowerLegendreDistanceThreshold="${input_type.s12GowerLegendreDistanceThreshold}" 
		-DotproductDistanceThreshold="${input_type.DotproductDistanceThreshold}" -HammingDistanceThreshold="${input_type.HammingDistanceThreshold}"
		-EuclideanDistanceThreshold="${input_type.EuclideanDistanceThreshold}"
		-relative="{$input_type.intensity_type}"
		
  </command>
  
  <inputs>
  	<conditional name="input_type">
      <param name="choice" type="select" label="Would you use a file" help="If 'NO' is selected then one or more mass(es) must be entered manually.">
        <option value="YES">YES</option>
        <option value="NO">NO</option>
      </param>
      <when value="YES">
      	<param name="masses" label=".msp file of masses (format: msp)" format="msp,txt" type="data" help=".msp output file from metaMS.runGC function, or any msp file." />
    	<param name="columnType" label="column" type="select" display="radio" help="5%-phenyl-95%-dimethylpolysiloxane (VAR5), 35%-phenyl-65%-dimethylpolysiloxane (MDN35), if you don't know select 'None'.">
          <option value="none">None</option>
          <option value="VAR5">VAR5</option>
          <option value="MDN35">MDN35</option>
        </param>
        <param name="ri" type="integer" value="" label="Alkane Retention Index" help="If neither an alkane RIs for VAR5 nor MDN35 is available in your setup, please select 'none' in the input field above!" />
    	<param name="riWindow" type="integer" value="" label="Retention Index Window" help="This value is for the library search used only. A larger window size will increase the number of matches.
      	 At the same time the identification becomes less reliable due to false matching spectra without RI consensus. The maximal number of hits returned from the data base is limited due to performance reasons." />
        <param name="maxHits" type="integer" value="0" label="Maximum Hits" help="Maximum number of hits per queried spectra, default=all (0)." />
        <param name="mzResolution" type="integer" value="0" label="Number of significant decimal" help="Number of significant decimals of your m/z." />
        <param name="maxIons" type="integer" value="0" label="Maximum number of ions" help="Number of m/z per spectra you want to keep for the queries, default 0 = all of them." />
    	<param name="JaccardDistanceThreshold" type="integer" value="0" label="JaccardDistance" help="The Jaccard distance: also known as the Jaccard similarity coefficient is a statistic used for comparing the similarity and	diversity of sample sets. The Jaccard coefficient
					measures similarity between finite sample sets, and is defined as the size of the intersection divided by the size of the union of the sample sets." />
    	<param name="s12GowerLegendreDistanceThreshold" type="integer" value="0" label="s12GowerLegendreDistanceThreshold" help="Let be the contingency table of binary data such as n11 = a, n10 = b, n01 = c and n00 = d. All these distances are of type d = sqrt(1 - s) with s a similarity coefficient.
					S12 coefficient of Gower and Legendre s7 = a / sqrt((a + b)(a + c))." />
    	<param name="DotproductDistanceThreshold" type="integer" value="0" label="DotproductDistanceThreshold" help="The dot product or scalar product is an algebric operation that takes two equal-length sequences of numbers (usually coordinate vectors) and returns a single number. It is
					used to calculate differences between points of different spectra in 3D (3D constructed with Retention infos, mass and intensity)." />
    	<param name="HammingDistanceThreshold" type="integer" value="0" label="HammingDistanceThreshold" help="The Hamming distance between two strings of equal length is the number of positions at which the corresponding symbols are different. In other words, it is the number of
					substitutions required to transform one string into another." />
    	<param name="EuclideanDistanceThreshold" type="integer" value="0" label="EuclideanDistanceThreshold" help="The Euclidean distance is a generalization of the familiar Pythagorean theorem. It is the 'ordinary' distance between two points in Euclidean space." />
    	<param name="intensity_type" label="Type of intensities" type="select" display="radio" help="Would you work with relative or absolute intensities? Example: relative = percentage, absolute = untouched">
          <option value="true">YES</option>
          <option value="false">NO</option>
        </param>
      </when>
      <when value="NO">
    	<param name="masses" size="30" area="true" type="text" label="Mass of the molecule "  help="For a list of masses + intensities write : mz1 int1 mz2 int2 mzx intx..."/>	
		<param name="columnType" label="column" type="select" display="radio" help="5%-phenyl-95%-dimethylpolysiloxane (VAR5), 35%-phenyl-65%-dimethylpolysiloxane (MDN35), if you don't know select 'None'.">
          <option value="none">None</option>
          <option value="VAR5">VAR5</option>
          <option value="MDN35">MDN35</option>
        </param>
        <param name="ri" type="integer" value="" label="Alkane Retention Index" help="If neither an alkane RIs for VAR5 nor MDN35 is available in your setup, please select 'none' in the input field above)!" />
    	<param name="riWindow" type="integer" value="" label="Retention Index Window" help="This value is for the library search used only. A larger window size will increase the number of matches.
      	 At the same time the identification becomes less reliable due to false matching spectra without RI consensus. The maximal number of hits returned from the data base is limited due to performance reasons." />
        <param name="maxHits" type="integer" value="0" label="Maximum Hits" help="Maximum number of hits per queried spectra, default=all (0)." />
        <param name="mzResolution" type="integer" value="0" label="Number of significant decimal" help="Number of significant decimals of your m/z." />
        <param name="maxIons" type="integer" value="0" label="Maximum number of ions" help="Number of m/z per spectra you want to keep for the queries, default 0 = all of them." />
    	<param name="JaccardDistanceThreshold" type="integer" value="0" label="JaccardDistance" help="The Jaccard distance: also known as the Jaccard similarity coefficient is a statistic used for comparing the similarity and	diversity of sample sets. The Jaccard coefficient
					measures similarity between finite sample sets, and is defined as the size of the intersection divided by the size of the union of the sample sets." />
    	<param name="s12GowerLegendreDistanceThreshold" type="integer" value="0" label="s12GowerLegendreDistanceThreshold" help="Let be the contingency table of binary data such as n11 = a, n10 = b, n01 = c and n00 = d. All these distances are of type d = sqrt(1 - s) with s a similarity coefficient.
					S12 coefficient of Gower and Legendre s7 = a / sqrt((a + b)(a + c))." />
    	<param name="DotproductDistanceThreshold" type="integer" value="0" label="DotproductDistanceThreshold" help="The dot product or scalar product is an algebric operation that takes two equal-length sequences of numbers (usually coordinate vectors) and returns a single number. It is
					used to calculate differences between points of different spectra in 3D (3D constructed with Retention infos, mass and intensity)." />
    	<param name="HammingDistanceThreshold" type="integer" value="0" label="HammingDistanceThreshold" help="The Hamming distance between two strings of equal length is the number of positions at which the corresponding symbols are different. In other words, it is the number of
					substitutions required to transform one string into another." />
    	<param name="EuclideanDistanceThreshold" type="integer" value="0" label="EuclideanDistanceThreshold" help="The Euclidean distance is a generalization of the familiar Pythagorean theorem. It is the 'ordinary' distance between two points in Euclidean space." />
    	<param name="intensity_type" label="Type of intensities" type="select" display="radio" help="Would you work with relative or absolute intensities? Example: relative = percentage, absolute = untouched">
          <option value="true">YES</option>
          <option value="false">NO</option>
        </param>
	  </when>
	 </conditional>
	</inputs>
	
	 <outputs>
	    <data name="GolmResExcel" label="${tool.name}_XLS" format="tabular" />
	    <data name="GolmResHtml" label="${tool.name}_HTML" format="html" />
	    <data name="GolmResJson" label="${tool.name}_JSON" format="vjson" />
	 </outputs>
	 
	 
	 
	 <help>
	 
	 **Authors**
  | Gabriel Cretin (for perl and Galaxy), Franck Giacomoni (for perl)

---------------------------------------------------

.. class:: infomark

**Please cite** If you use this tool, please cite MassBank.

for `Golm Metabolome Database &lt;http://gmd.mpimp-golm.mpg.de/&gt;`_ :
  `Hummel, J., Strehmel, N., Selbig, J., Walther, D. and Kopka, J. (2010) Decision tree supported substructure prediction of metabolites from GC-MS profiles, Metabolomics.&lt;http://dx.doi.org/10.1007/s11306-010-0198-7&gt;`_
	 
	 </help>
	 
	 
-----------
Description
-----------

The Golm Metabolome Database (GMD) facilitates the search for and dissemination of reference mass spectra from biologically active metabolites quantified using gas chromatography (GC) coupled to mass spectrometry (MS).
This tool intends to facilitate the annotation of masses from GC-MS by searching informations through GMD webservices.  

	 
</tool>
	 